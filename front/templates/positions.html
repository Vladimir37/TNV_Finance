{% extends "_layout_.html" %}

{% block modal %}
    <article class="modal-header">
        <h3>Account creating</h3>
    </article>
    <article class="modal-body" ng-controller="creatingAccount">
    </article>
{% endblock %}

{% block content %}
    <section class="row" ng-controller="listPositions">
        <article class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Your positions</h3>
                </div>
                <div class="panel-body">
                    <article class="main-list-group">
                        <article class="list-group-item main-list" ng-class="get_class_pos(position.id)" ng-click="change_pos(position.id)" ng-repeat="position in positions">
                            {[ position.symbol ]}
                            <span class="badge" title="Number of positions">{[ position.open_positions ]}</span>
                            <span class="badge" title="Current deposit">{[ position.calculated_value ]} USD</span>
                        </article>
                    </article>
                    <article class="btn btn-primary" data-toggle="modal" data-target="#modal">New</article>
                    <br/>
                    <ul class="nav nav-pills activity">
                        <li ng-class="get_class_activity(1)" ng-click="change_active(1)"><a>Active</a></li>
                        <li ng-class="get_class_activity(0)" ng-click="change_active(0)"><a>Inactive</a></li>
                    </ul>
                </div>
            </div>
        </article>
        <article class="col-md-8">
            <article class="alert alert-danger" ng-if="error_message">
                <b>{[ error_message ]}</b>
            </article>
            <article class="panel panel-primary" ng-if="active_acc">
                <article class="panel-heading">{[ active_pos.symbol]}</article>
                <article class="panel-body">
                    <table class="table table-striped table-hover cabinet-table">
                        <tr>
                            <th>Field</th>
                            <th>Value</th>
                        </tr>
                        <tr>
                            <td>ID</td>
                            <td>{[ active_pos.id ]}</td>
                        </tr>
                        <tr>
                            <td>Category</td>
                            <td>{[ active_pos.category ]}</td>
                        </tr>
                        <tr>
                            <td>Initial deposit</td>
                            <td>{[ active_pos.initial_value ]}</td>
                        </tr>
                        <tr>
                            <td>Current deposit</td>
                            <td>{[ active_pos.current_value ]}</td>
                        </tr>
                        <tr>
                            <td>Calculated deposit</td>
                            <td>{[ active_pos.calculated_value ]}</td>
                        </tr>
                        <tr>
                            <td>Profit</td>
                            <td>{[ active_pos.profit ]}</td>
                        </tr>
                        <tr>
                            <td>Open positions</td>
                            <td>{[ active_pos.open_positions ]}</td>
                        </tr>
                        <tr>
                            <td>Closed positions</td>
                            <td>{[ active_pos.closed_positions ]}</td>
                        </tr>
                        <tr>
                            <td>Status</td>
                            <td>{[ check_active(active_pos) ]}</td>
                        </tr>
                    </table>
                    <a class="btn btn-primary" href="/positions#{[ active_acc.id ]}">Details</a>
                    <button class="btn btn-danger" ng-click="deleteAccount(active_acc.id)">Delete account</button>
                </article>
            </article>
        </article>
    </section>
{% endblock %}